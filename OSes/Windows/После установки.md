## Постинстал

- [Постинстал](#постинстал)
  - [В кратце](#в-кратце)
  - [Git](#git)
    - [Исправление проблемы отображение кириллических символов в Командной строке](#исправление-проблемы-отображение-кириллических-символов-в-командной-строке)
    - [Данные об авторе коммита](#данные-об-авторе-коммита)
    - [Перенос строки](#перенос-строки)
    - [Редактор коммитов по умолчанию](#редактор-коммитов-по-умолчанию)
  - [Компоненты Windows](#компоненты-windows)
    - [WSL](#wsl)
    - [Песочница](#песочница)
    - [Твики реестра](#твики-реестра)
    - [Отключение защитника Windows](#отключение-защитника-windows)
    - [Изменение стандартной раскладки клавиатуры](#изменение-стандартной-раскладки-клавиатуры)
    - [Отключение группировки файлов и папок в Проводнике](#отключение-группировки-файлов-и-папок-в-проводнике)
  - [Импорт настроек программ](#импорт-настроек-программ)



Список действий по настройке системы и сторонних программ

Также отдельно программы, не связанные с настройкой системы - [Полезные программы](./Полезные%20программы.md)

### В кратце

Порядок действий коротко:
<!-- no toc -->
1. [Применить твики реестра](#твики-реестра)
2. [Добавить папку пользователя в исключения Защитника Windows](#отключение-защитника-windows)
3. [Изменить стандартную раскладку клавиатуры на английский](#изменение-стандартной-раскладки-клавиатуры)
4. [Отключить группировку файлов и папок в Проводнике](#отключение-группировки-файлов-и-папок-в-проводнике)
5. [Git - установить, добавить информацию о пользователе, настроить тип переносов и стандартный редактор](#git)
6. [Установить WSL](#wsl)
7. [Включить песочницу Windows](#песочница)
8. [Установить программы](./Полезные%20программы.md)
9. [Импортировать настройки программ](#импорт-настроек-программ)

Готово


### Git

#### Исправление проблемы отображение кириллических символов в Командной строке

Статьи по теме:
- [stackoverflow](https://ru.stackoverflow.com/questions/1184169/%D0%9E%D1%82%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5-%D0%BA%D0%B8%D1%80%D0%B8%D0%BB%D0%BB%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B8%D1%85-%D0%B8%D0%BC%D1%91%D0%BD-%D1%84%D0%B0%D0%B9%D0%BB%D0%BE%D0%B2-%D0%B2-git-status)

В кратце:
- В git bash выполнить команду `git config --global core.quotePath false`

#### Данные об авторе коммита

Статьи по теме:
- https://selectel.ru/blog/tutorials/how-to-install-git-to-windows/

В кратце:
- Глобально:
```
git config --global user.email "any@email.ru"
git config --global user.name "Any User Name"
```
- Локально:
```
git config --local user.email "any@email.ru"
git config --local user.name "Any User Name"
```

#### Перенос строки

Статьи по теме:
- https://urvanov.ru/2020/03/27/git-%D0%B8-%D0%BF%D0%B5%D1%80%D0%B5%D0%B2%D0%BE%D0%B4%D1%8B-%D1%81%D1%82%D1%80%D0%BE%D0%BA/
- https://stackoverflow.com/questions/10418975/how-to-change-line-ending-settings
- https://git-scm.com/book/ru/v2/%D0%9D%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0-Git-%D0%9A%D0%BE%D0%BD%D1%84%D0%B8%D0%B3%D1%83%D1%80%D0%B0%D1%86%D0%B8%D1%8F-Git
- https://docs.github.com/en/get-started/getting-started-with-git/configuring-git-to-handle-line-endings

В кратце:
- в Windows
  - `git config --global core.autocrlf true`
- в Linux и macOS
  - `git config --global core.autocrlf input`

#### Редактор коммитов по умолчанию

Статьи по теме:
- https://docs.github.com/en/get-started/getting-started-with-git/associating-text-editors-with-git

В кратце:
- использовать VSCode
  - `git config --global core.editor "code --wait"`
- использовать Sublime Text
  - `git config --global core.editor "'C:/Program Files (x86)/sublime text 3/subl.exe' -w"`
- использовать Notepad++
  - `git config --global core.editor "'C:/Program Files (x86)/Notepad++/notepad++.exe' -multiInst -notabbar -nosession -noPlugin"`

---

### Компоненты Windows

#### WSL

Статьи по теме:
- https://winitpro.ru/index.php/2020/07/13/zapusk-linux-v-windows-wsl-2/
- http://onreader.mdl.ru/ProWindowsSubsystemLinux/content/Ch02.html
- https://hackware.ru/?p=13586
- https://www.youtube.com/watch?v=5wuOBtegwu0

В кратце:

Пуск -> Панель управления -> Программы и компоненты -> Включение и отключение компонентов Windows (Control Panel\All Control Panel Items\Programs and Features\Turn Windows features on or off), активировать галочку Подсистема Windows для Linux (Windows Subsystem for Linux), нажать кнопку ОК, и перезагрузить компьютер.

Или включить компоненты WSL в Windows с помощью dism:
```
dism.exe /online /enable-feature /featurename:VirtualMachinePlatform /all /norestart
dism.exe /online /enable-feature /featurename:Microsoft-Windows-Subsystem-Linux /all /norestart
```
Или включить компоненты WSL в Windows с помощью Powershell:
```powershell
Enable-WindowsOptionalFeature -Online -FeatureName Microsoft-Windows-Subsystem-Linux
Enable-WindowsOptionalFeature -Online -FeatureName VirtualMachinePlatform
```

Потом переключить WSL (WSL 1) на WSL 2 с помощью скачивания и установки:
- https://docs.microsoft.com/ru-ru/windows/wsl/wsl2-kernel
  - https://learn.microsoft.com/ru-ru/windows/wsl/install-manual#step-4---download-the-linux-kernel-update-package
  - https://wslstorestorage.blob.core.windows.net/wslblob/wsl_update_x64.msi

Потом чтобы сделать WSL2 архитектурой по умолчанию для новых дистрибутивов, в PowerShell выполнить команду `wsl --set-default-version 2`

#### Песочница

Статьи по теме:
- https://lumpics.ru/how-enable-sandbox-in-windows-11/
- https://timeweb.com/ru/community/articles/kak-vklyuchit-windows-sandbox
- https://www.comss.ru/page.php?id=5658#cmd
- https://winitpro.ru/index.php/2019/05/14/windows-sandbox/
- https://support.microsoft.com/ru-ru/office/%D0%B2%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D0%B5-%D0%B8-%D0%B2%D1%8B%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D0%B5-%D1%80%D0%B5%D0%B6%D0%B8%D0%BC%D0%B0-%D0%BF%D0%B5%D1%81%D0%BE%D1%87%D0%BD%D0%B8%D1%86%D1%8B-%D0%B4%D0%BB%D1%8F-%D0%BE%D1%82%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D1%8F-%D0%BC%D0%B0%D0%BA%D1%80%D0%BE%D1%81%D0%BE%D0%B2-8cc7bad8-38c2-4a7a-a604-43e9a7bbc4fb

В кратце:

- Откройте меню Компоненты Windows (Панель управления > Программы > Программы и компоненты > Включение и отключение компонентов Windows) и выберите Песочница Windows. Нажмите OK, чтобы установить песочницу. Может понадобиться перезагрузка компьютера.

или

- Выполнить команду в PowerShell `Enable-WindowsOptionalFeature –FeatureName "Containers-DisposableClientVM" -All -Online`
  - или для отключения команду `Disable-WindowsOptionalFeature –FeatureName "Containers-DisposableClientVM" -Online`

или

- Выполнить команду в Командной строке `Dism /online /Enable-Feature /FeatureName:"Containers-DisposableClientVM" -All`
  - или для отключения команду `Dism /online /Disable-Feature /FeatureName:"Containers-DisposableClientVM"`

Windows Sandbox Editor EXE - https://github.com/damienvanrobaeys/Windows_Sandbox_Editor

#### Твики реестра

С помощью твиков Реестра Windows (изменения данных в нем), можно изменить множество разных параметров. Например можно включить/отключить отображение расширений файлов в Проводнике, отображение скрытых файлов и многое другое.

Я собрал все необходимые твики для автоматической настройки Windows в соответствующих .reg-файлах, достаточно двойного клика и подтверждения в появившемся окне, чтобы применить все твики/настройки к системе. Ну и перезапустить компьютер тоже не помешает.
Описание того, что делает каждый файл - находится в них самих, над каждым твиком есть комментарий того, что он делает.

Файлы:
- [tweaks.reg](./scripts/tweaks.reg) - основной файл, который я делал находясь в Windows 10 22H2. Эти твики подойдут и для Windows 11 и, возможно, для будущих версий Windows
- [tweaks_win11.reg](./scripts/tweaks_win11.reg) - настройки, специфичные для Windows 11 (и, возможно, новых версий системы). Для Windows 10 они не подойдут


#### Отключение защитника Windows

Есть множество файлов, в которых Защитник Windows видит угрозу и удаляет их или помещает в карантин.

Официального способа отключить Защитник Windows раз и навсегда - нет. Если отключить его в Параметрах системы, то он 100% включится после перезагрузки компьютера или даже раньше. А начиная с Windows 11 отключение защиты в реальном времени - не отключает ее как таковую и если это сделать, а потом запустить какой-нибудь файл, который считается вредоносным (например `GenP.exe` - активатор Adobe), то Защитник Windows поместит его в Карантин сразу или через несколько секунд после запуска. 

Через переключение пунктов в Реестре и в Редакторе Групповых политик - отключить Защитник Windows раз и навсегда тоже не получится. С каким-нибудь обновлением системы он может сам включиться.

А также можно доиграться с попытками его выключения так, что пункты включения/отключения Защитника Windows пропадут из Параметров системы, но Защитник будет включен и, получится так что пропадет способ его временного отключения.

Поэтому самый надежный способ - добавить в исключения всю папку пользователя. В ней есть и Загрузки и папка Temp и много всего разного. Это можно сделать с помощью команды в Powershell:
```powershell
# Запустить от имени администратора
Add-MpPreference -ExclusionPath "C:\Users\$env:USERNAME"
```

С помощью DeepSeek я сгенерировал CMD-скрипт, который проверяет есть ли папка пользователя уже в исключениях Защитника Windows и если ее там нет - добавляет ее туда. Скрипт - [Add user folder to Windows Defender exclusions.cmd](./scripts/Add%20user%20folder%20to%20Windows%20Defender%20exclusions.cmd)

Но если хочется попробовать отключить Защитник Windows и прочую телеметрию, то лучше использовать определенную конфигурацию скриптов с сайта https://privacy.sexy/


#### Изменение стандартной раскладки клавиатуры

При запуске компьютера удобно с самого начала иметь английскую раскладку как минимум потому, что пароль системы имеет английские символы.

Сменить стандартную раскладку можно только вручную в системных настройках: `Время и язык -> Язык и регион -> Ввод -> Дополнительные параметры клавиатуры -> Переопределение метода ввода по умолчанию`

Статьи по теме:
- https://www.outsidethebox.ms/19635/
- https://qna.habr.com/answer?answer_id=2413386#answers_list_answer
- https://superuser.com/a/1782889

Я пробовал это автоматизировать сделав твик реестра (https://github.com/Drovosek01/settings/blob/b67adf2193c57a24ccdf009d65ec40bbdd855205/OSes/Windows/scripts/tweaks_language_specific.reg) как указано здесь - https://superuser.com/a/1776893. Но моя практика на 1 ноутбуке с чистой установленной Windows 10 22H2 показала, что этот твик не работает и при запуске в системе остается русская раскладка. Хотя может быть это только в Windows 10 так, а в Windows 11 этот твик работает?


#### Отключение группировки файлов и папок в Проводнике

Сделать единый вид всех папок в системе в Проводнике - невозможно с помощью твиков реестра (я не нашел способа).

Но это можно сделать вручную - настроить вид одной папки, а потом применить эти настройки вида ко всем папкам, как указано в ответах здесь - https://learn.microsoft.com/ru-ru/answers/questions/3994994/windows-11

Необходимо:
1. Перейти в корень диска C в Проводнике
2. Польностью настроить вид папки, начиная от ширины и расположения столбцов и заканчивая включением отображения расширений файлов
3. Открыть Параметры в Проводнике и нажать кнопку "Применить ко всем папкам"
4. Перейти в папку Users и проделать тоже самое
5. В папке своего пользователя перейти в стандартные папки - Загрузки, Документы и т.д. и проделать тоже самое

Готово



### Импорт настроек программ

У современных программ их настройки можно экспортировать из самих программ и импортировать на другом компьютере, чтобы вручную заново не настраивать программу.

В Windows некоторые программы хранят настройки в Реестре Windows, а некоторые программы - в отдельных файлах.

Все экспортированные файлы с настройками, которые имеют текстовый формат я сохранил в соседней папке [apps_settings](./apps_settings/). Программы, которые хранят экспортированные настройки не в текстовом формате - я загрузил в раздел [Issues](https://github.com/Drovosek01/settings/issues/1) данного репозитория и прикреплю ссылку ниже

| Имя программы | Тип файла настроек | ссылка на файл
| --- | --- | --- |
7-zip | реестр | [локально](./apps_settings/7-zip%20settings.reg)
Bandizip | реестр | [локально](./apps_settings/Bandizip%20Settings.reg)
Powertoys | архив с расширением `.ptb` | [ссылка]([./apps_settings/Bandizip%20Settings.reg](https://github.com/user-attachments/files/24508565/settings_134121402753333083.zip))
Notepad++ | xml | [локально](./apps_settings/Notepad++%20config.xml)
010 Editor | бинарный `.cfg` | [ссылка](https://github.com/user-attachments/files/24510525/010Editor.settings.zip)
Free Download Manager | почти весь текстовый файл с расширением `.fds` | [локально](./apps_settings/fdm_settings.fds)


Куда помещать файлы настроек:
- файл настроек PowerToys имеет название типа settings_134121402753333083.ptb, его необходимо поместить в папку по пути `C:\Users\%USERNAME%\Documents\PowerToys\Backup` и в интерфейсе приложения нажать кнопку Restore
- файл настроек Notepad++ имеет название config.xml, его необходимо поместить в папку по пути `%APPDATA%\Notepad++`. В файле config.xml находятся только настройки программы, в соседних файлах есть дополнительная информация, например session.xml, styles.xml и т.д.
- файл настроек 010 Editor имеет название 010Editor.cfg и чтобы применить эти настройки необходимо в самой программе открыть Tools -> Options -> General -> Import и импортировать этот файл
- файл настроек Free Download Manager имеет название fdm_settings.fds и его можно экспортировать и импортировать из меню самой программы в правом верхнем углу


После установки всех рекомендованных программ - необходимо импортировать заготовленные настройки и перезапустить компьютер.
